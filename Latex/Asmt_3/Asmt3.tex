\documentclass{report}

\usepackage{pgfplots}
\pgfplotsset{width=5.5in,compat=1.10}

 \begin{document}
 
  \begin{center}
 \textbf{Choosing r,b}
\end{center}

\begin{center}
Consider computing an LSH using t = 160 hash functions. We want to find all object pairs which have
Jaccard similarity above ${\tau}$ = .85
\end{center}

\begin{center}
A: (15 points) Use the trick mentioned in class and the notes to estimate the best values of hash functions
b within each of r bands to provide the S-curve ${f(s) = 1 - (1 - s^b)^r}$, with good separation at ${\tau}$ . Report these values.
\end{center}
 
\begin{tikzpicture}
\begin{axis}[
    axis lines = left,
    xlabel = $x$,
    ylabel = {$f(x)$},
]
%%%%%%%%%%%%%%%%%%%%%%%%%%%
\addplot [
    domain=0:1, 
    samples=100, 
    color=red,
]
{1 - (1 - x^31.2282)^(5.1236)};
\addlegendentry{$1 - (1 - x^{31.2282})^{5.1236}$}
%%%%%%%%%%%%%%%%%%%%%%%%%%%
\addplot [
    domain=0:1, 
    samples=100, 
    color=blue,
    ]
    {1 - (1 - x^15)^(10.6)};
\addlegendentry{$1 - (1 - x^{15})^{10.6}$}
%%%%%%%%%%%%%%%%%%%%%%%%%%%
\addplot [
    domain=0:1, 
    samples=100, 
    color=green,
    ]
    {1 - (1 - x^16.5)^(9.69)};
\addlegendentry{$1 - (1 - x^{16.5})^{9.69}$}
%%%%%%%%%%%%%%%%%%%%%%%%%%%
\addplot [
    domain=0:1, 
    samples=100, 
    color=black,
    ]
    {1}; 
\end{axis}
\end{tikzpicture}

\begin{center}
The value for r = 9.69 and b = 16.5 create the above curve and pass through the point (.85,.5). r * b = t ${\Rightarrow}$ 9.69 * 16.5 ${\approx}$ 160. As you can see from the equations above, r = 9.69 and b = 16.5 make up the best values.
\end{center}


\begin{center}
B: (15 points) Consider the 4 objects A, B, C, D, with the following pair-wise similarities. Using your choice of r and b and f(Â·), what is the probability of each pair of the four objects for being estimated to having similarity greater that ${\tau}$ = 0.85? Report 6 numbers. (Show your work.)
\end{center}

\begin{flushleft}
${1 - (1 - .10^{b})^{r} = f(s)}$ \newline
${1 - (1 - .75^{16.5})^{9.69} = .081}$\newline
${1 - (1 - .25^{16.5})^{9.69} = 1.12806 * 10^{-9}}$ \newline
${1 - (1 - .35^{16.5})^{9.69} = 2.90701 * 10^{-7}}$ \newline
${1 - (1 - .10^{16.5})^{9.69} = 3.06425 * 10^{-16}}$ \newline
${1 - (1 - .40^{16.5})^{9.69} = 2.63217 * 10^{-6}}$ \newline
${1 - (1 - .87^{16.5})^{9.69} = .641592}$
\end{flushleft}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 
 \begin{center}
 \textbf{Generating Random Directions}
\end{center}

\begin{center}
A: (10 points) Describe how to generate a single random unit vector in d = 10 dimensions using only the operation u  ${\leftarrow} $ unif (0, 1) which generates a uniform random variable between 0 and 1. (This can be called multiple times.)
\end{center}

\begin{center}
${<}$0.13506642406271607, 1.4369942896931038, 0.1903511525261229, -1.7537602542415558, 0.16862812390764476, 1.182598203233134, 1.2346676734218769, -0.10414957981418553, 0.357726500505956, -0.10704248845019695${>}$
\end{center}

\begin{center}
To generate a single random unit vector in d = 10 dimensions you get a program that can generate random numbers between 0 and 1. You then generate a u1 and u2 with your random number generator and you use the given equations to generate 2 numbers of the vector at the time.\newline Equations: y1 = $\sqrt{-2*ln(u1)}*cos(2*\pi*u2)$\newline y2 = $\sqrt{-2*ln(u1)}*sin(2*\pi*u2)$
\end{center}

\begin{center}
B: (20 points) Generate t = 160 unit vectors in ${R^d}$ for d = 100. Plot of CDF of their pairwise dot products
\end{center}

 \begin{tikzpicture}
\begin{axis}[
    title={Generating Random Directions Cumulative Density Plot},
    xlabel={Possibilities},
    ylabel={Dot Product Probability},
    xmin=-50, xmax=50,
    ymin=0, ymax=1,
    xtick={-50, 25, 0, 25, 50},
    ytick={0,.25,.5,.75,1},
    legend pos=north west,
    ymajorgrids=true,
    grid style=dashed,
]
 
\addplot[
    color=blue,
    mark=.,
    ]
    coordinates {(-50,0.00000)(-49,0.00000)(-48,0.00000)(-47,0.00000)(-46,0.00000)(-45,0.00000)(-44,0.00000)(-43,0.00000)(-42,0.00000)(-41,0.00000)(-40,0.00000)(-39,0.00000)(-38,0.00000)(-37,0.00000)(-36,0.00000)(-35,0.00020)(-34,0.00020)(-33,0.00040)(-32,0.00061)(-31,0.00061)(-30,0.00081)(-29,0.00141)(-28,0.00162)(-27,0.00303)(-26,0.00364)(-25,0.00424)(-24,0.00646)(-23,0.00990)(-22,0.01475)(-21,0.01758)(-20,0.02222)(-19,0.03091)(-18,0.03960)(-17,0.04828)(-16,0.05879)(-15,0.07051)(-14,0.08465)(-13,0.10101)(-12,0.11879)(-11,0.14061)(-10,0.16465)(-9,0.19131)(-8,0.21677)(-7,0.24667)(-6,0.27980)(-5,0.31414)(-4,0.34768)(-3,0.38424)(-2,0.42586)(-1,0.46525)(0,0.54667)(1,0.58667)(2,0.63091)(3,0.66828)(4,0.70303)(5,0.73798)(6,0.76990)(7,0.79778)(8,0.82283)(9,0.84869)(10,0.87394)(11,0.89051)(12,0.90869)(13,0.92242)(14,0.93818)(15,0.94990)(16,0.95919)(17,0.96586)(18,0.97273)(19,0.97737)(20,0.98182)(21,0.98646)(22,0.98909)(23,0.99071)(24,0.99293)(25,0.99475)(26,0.99636)(27,0.99778)(28,0.99798)(29,0.99818)(30,0.99879)(31,0.99919)(32,0.99960)(33,0.99980)(34,0.99980)(35,0.99980)(36,0.99980)(37,0.99980)(38,1.00000)(39,1.00000)(40,1.00000)(41,1.00000)(42,1.00000)(43,1.00000)(44,1.00000)(45,1.00000)(46,1.00000)(47,1.00000)(48,1.00000)(49,1.00000)};
     
\end{axis}
\end{tikzpicture}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{center}
 \textbf{Angular Hashed Approximation}
\end{center}

\begin{center}
Consider the n = 500 data points in Rd for d = 100 in data set R, given at the top. We will use the angular similarity, between two vectors a, b $\epsilon$ $R^d$: $S_{ang}(a,b) = 1 - \frac{1}{\pi}arccos(<\bar{a},\bar{b}>)$. If a,b are not unit vectors, then we convert them to $\bar{a}$ = $\frac{a}{\parallel a\parallel_2}$ and $\bar{b}$ = $\frac{b}{\parallel b\parallel_2}$. The definition of sang (a, b) assumes that the input are unit vectors, and it takes a value between 0 and 1, with as usual 1 meaning most similar.
\end{center}

\begin{center}
A: (15 points) Compute all pairs of dot products, and plot a cdf of their angular 2
similarities. Report the number with angular similarity more than ${\tau}$ = 0.85.
\end{center}
 
  \begin{tikzpicture}
\begin{axis}[
    title={Angular Simularity of R.txt CDF},
    xlabel={Possibilities},
    ylabel={Angular Hashed Approximation Probability},
    xmin=0, xmax=1,
    ymin=0, ymax=1,
    xtick={.25,.5,.75,1},
    ytick={0,.25,.5,.75,1},
    legend pos=north west,
    ymajorgrids=true,
    grid style=dashed,
]
 
\addplot[
    color=blue,
    mark=.,
    ]
    coordinates {(0.68700,0.00002)(0.68800,0.00004)(0.68900,0.00004)(0.69000,0.00005)(0.69100,0.00007)(0.69200,0.00010)(0.69300,0.00012)(0.69400,0.00016)(0.69500,0.00022)(0.69600,0.00028)(0.69700,0.00034)(0.69800,0.00041)(0.69900,0.00051)(0.70000,0.00059)(0.70100,0.00072)(0.70200,0.00083)(0.70300,0.00102)(0.70400,0.00119)(0.70500,0.00146)(0.70600,0.00170)(0.70700,0.00198)(0.70800,0.00238)(0.70900,0.00283)(0.71000,0.00328)(0.71100,0.00386)(0.71200,0.00455)(0.71300,0.00516)(0.71400,0.00586)(0.71500,0.00668)(0.71600,0.00761)(0.71700,0.00873)(0.71800,0.00993)(0.71900,0.01137)(0.72000,0.01281)(0.72100,0.01435)(0.72200,0.01627)(0.72300,0.01823)(0.72400,0.02053)(0.72500,0.02262)(0.72600,0.02503)(0.72700,0.02749)(0.72800,0.03024)(0.72900,0.03334)(0.73000,0.03665)(0.73100,0.03997)(0.73200,0.04386)(0.73300,0.04779)(0.73400,0.05167)(0.73500,0.05638)(0.73600,0.06067)(0.73700,0.06548)(0.73800,0.07084)(0.73900,0.07595)(0.74000,0.08141)(0.74100,0.08704)(0.74200,0.09263)(0.74300,0.09937)(0.74400,0.10609)(0.74500,0.11326)(0.74600,0.12004)(0.74700,0.12749)(0.74800,0.13479)(0.74900,0.14225)(0.75000,0.14975)(0.75100,0.15746)(0.75200,0.16556)(0.75300,0.17385)(0.75400,0.18167)(0.75500,0.18972)(0.75600,0.19826)(0.75700,0.20686)(0.75800,0.21560)(0.75900,0.22449)(0.76000,0.23357)(0.76100,0.24236)(0.76200,0.25152)(0.76300,0.26059)(0.76400,0.26964)(0.76500,0.27835)(0.76600,0.28693)(0.76700,0.29539)(0.76800,0.30388)(0.76900,0.31178)(0.77000,0.31969)(0.77100,0.32726)(0.77200,0.33481)(0.77300,0.34191)(0.77400,0.34895)(0.77500,0.35539)(0.77600,0.36217)(0.77700,0.36834)(0.77800,0.37431)(0.77900,0.37954)(0.78000,0.38518)(0.78100,0.39032)(0.78200,0.39511)(0.78300,0.39962)(0.78400,0.40379)(0.78500,0.40806)(0.78600,0.41206)(0.78700,0.41677)(0.78800,0.42091)(0.78900,0.42509)(0.79000,0.42874)(0.79100,0.43160)(0.79200,0.43367)(0.79300,0.43534)(0.79400,0.43675)(0.79500,0.43816)(0.79600,0.43951)(0.79700,0.44056)(0.79800,0.44157)(0.79900,0.44281)(0.80000,0.44418)(0.80100,0.44533)(0.80200,0.44627)(0.80300,0.44695)(0.80400,0.44738)(0.80500,0.44758)(0.80600,0.44771)(0.80700,0.44786)(0.80800,0.44798)(0.80900,0.44813)(0.81000,0.44829)(0.81100,0.44840)(0.81200,0.44859)(0.81300,0.44877)(0.81400,0.44894)(0.81500,0.44915)(0.81600,0.44935)(0.81700,0.44960)(0.81800,0.44979)(0.81900,0.45004)(0.82000,0.45029)(0.82100,0.45051)(0.82200,0.45067)(0.82300,0.45092)(0.82400,0.45116)(0.82500,0.45142)(0.82600,0.45165)(0.82700,0.45196)(0.82800,0.45225)(0.82900,0.45253)(0.83000,0.45276)(0.83100,0.45297)(0.83200,0.45335)(0.83300,0.45368)(0.83400,0.45401)(0.83500,0.45427)(0.83600,0.45465)(0.83700,0.45508)(0.83800,0.45547)(0.83900,0.45586)(0.84000,0.45622)(0.84100,0.45669)(0.84200,0.45716)(0.84300,0.45757)(0.84400,0.45792)(0.84500,0.45842)(0.84600,0.45890)(0.84700,0.45939)(0.84800,0.45999)(0.84900,0.46053)(0.85000,0.46107)(0.85100,0.46157)(0.85200,0.46208)(0.85300,0.46285)(0.85400,0.46349)(0.85500,0.46410)(0.85600,0.46471)(0.85700,0.46528)(0.85800,0.46596)(0.85900,0.46661)(0.86000,0.46740)(0.86100,0.46804)(0.86200,0.46879)(0.86300,0.46958)(0.86400,0.47029)(0.86500,0.47093)(0.86600,0.47174)(0.86700,0.47250)(0.86800,0.47318)(0.86900,0.47387)(0.87000,0.47461)(0.87100,0.47531)(0.87200,0.47608)(0.87300,0.47699)(0.87400,0.47784)(0.87500,0.47869)(0.87600,0.47934)(0.87700,0.48014)(0.87800,0.48097)(0.87900,0.48172)(0.88000,0.48251)(0.88100,0.48344)(0.88200,0.48429)(0.88300,0.48512)(0.88400,0.48588)(0.88500,0.48674)(0.88600,0.48762)(0.88700,0.48841)(0.88800,0.48936)(0.88900,0.49033)(0.89000,0.49127)(0.89100,0.49217)(0.89200,0.49303)(0.89300,0.49401)(0.89400,0.49487)(0.89500,0.49587)(0.89600,0.49677)(0.89700,0.49774)(0.89800,0.49877)(0.89900,0.49987)(0.90000,0.50073)(0.90100,0.50178)(0.90200,0.50286)(0.90300,0.50395)(0.90400,0.50507)(0.90500,0.50604)(0.90600,0.50713)(0.90700,0.50812)(0.90800,0.50934)(0.90900,0.51066)(0.91000,0.51206)(0.91100,0.51372)(0.91200,0.51541)(0.91300,0.51715)(0.91400,0.51911)(0.91500,0.52107)(0.91600,0.52358)(0.91700,0.52624)(0.91800,0.52890)(0.91900,0.53191)(0.92000,0.53545)(0.92100,0.53897)(0.92200,0.54267)(0.92300,0.54670)(0.92400,0.55083)(0.92500,0.55536)(0.92600,0.56026)(0.92700,0.56585)(0.92800,0.57132)(0.92900,0.57703)(0.93000,0.58325)(0.93100,0.58915)(0.93200,0.59552)(0.93300,0.60182)(0.93400,0.60844)(0.93500,0.61546)(0.93600,0.62240)(0.93700,0.62942)(0.93800,0.63693)(0.93900,0.64431)(0.94000,0.65225)(0.94100,0.66018)(0.94200,0.66798)(0.94300,0.67606)(0.94400,0.68407)(0.94500,0.69253)(0.94600,0.70083)(0.94700,0.70906)(0.94800,0.71731)(0.94900,0.72602)(0.95000,0.73440)(0.95100,0.74366)(0.95200,0.75230)(0.95300,0.76115)(0.95400,0.77023)(0.95500,0.77941)(0.95600,0.78844)(0.95700,0.79704)(0.95800,0.80541)(0.95900,0.81392)(0.96000,0.82155)(0.96100,0.82926)(0.96200,0.83683)(0.96300,0.84447)(0.96400,0.85205)(0.96500,0.85939)(0.96600,0.86726)(0.96700,0.87444)(0.96800,0.88126)(0.96900,0.88816)(0.97000,0.89507)(0.97100,0.90147)(0.97200,0.90826)(0.97300,0.91451)(0.97400,0.92127)(0.97500,0.92847)(0.97600,0.93529)(0.97700,0.94264)(0.97800,0.94998)(0.97900,0.95724)(0.98000,0.96434)(0.98100,0.97214)(0.98200,0.97963)(0.98300,0.98705)(0.98400,0.99286)(0.98500,0.99548)(0.98600,0.99707)(0.98700,0.99803)(0.98800,0.99873)(0.98900,0.99916)(0.99000,0.99952)(0.99100,0.99982)(0.99200,0.99995)(0.99300,0.99999)(0.99400,1.00000)
};
     
\end{axis}
\end{tikzpicture}

\begin{center}
B: (20 points) Now compute the dot products and angular similarities among t pairs of the t random unit vectors from Q2.B. Again plot the cdf, and report the number with angular similarity above ${\tau}$ = 0.85.
\end{center}

  \begin{tikzpicture}
\begin{axis}[
    title={Angular Simularity from Q2.B CDF},
    xlabel={Possibilities},
    ylabel={Angular Hashed Approximation Probability Product},
    xmin=0, xmax=1,
    ymin=0, ymax=1,
    xtick={.25,.5,.75,1},
    ytick={0,.25,.5,.75,1},
    legend pos=north west,
    ymajorgrids=true,
    grid style=dashed,
]
 
\addplot[
    color=blue,
    mark=.,
    ]
    coordinates {(0.37700,0.00020)(0.37800,0.00020)(0.37900,0.00020)(0.38000,0.00020)(0.38100,0.00020)(0.38200,0.00020)(0.38300,0.00020)(0.38400,0.00020)(0.38500,0.00020)(0.38600,0.00040)(0.38700,0.00040)(0.38800,0.00061)(0.38900,0.00081)(0.39000,0.00081)(0.39100,0.00081)(0.39200,0.00101)(0.39300,0.00101)(0.39400,0.00101)(0.39500,0.00101)(0.39600,0.00101)(0.39700,0.00101)(0.39800,0.00101)(0.39900,0.00101)(0.40000,0.00101)(0.40100,0.00121)(0.40200,0.00121)(0.40300,0.00121)(0.40400,0.00121)(0.40500,0.00141)(0.40600,0.00162)(0.40700,0.00202)(0.40800,0.00242)(0.40900,0.00343)(0.41000,0.00364)(0.41100,0.00364)(0.41200,0.00364)(0.41300,0.00364)(0.41400,0.00444)(0.41500,0.00465)(0.41600,0.00505)(0.41700,0.00545)(0.41800,0.00586)(0.41900,0.00606)(0.42000,0.00667)(0.42100,0.00687)(0.42200,0.00747)(0.42300,0.00828)(0.42400,0.00909)(0.42500,0.01010)(0.42600,0.01091)(0.42700,0.01232)(0.42800,0.01333)(0.42900,0.01475)(0.43000,0.01657)(0.43100,0.01818)(0.43200,0.02000)(0.43300,0.02081)(0.43400,0.02222)(0.43500,0.02465)(0.43600,0.02505)(0.43700,0.02606)(0.43800,0.02808)(0.43900,0.02990)(0.44000,0.03394)(0.44100,0.03636)(0.44200,0.03758)(0.44300,0.04000)(0.44400,0.04141)(0.44500,0.04343)(0.44600,0.04667)(0.44700,0.05111)(0.44800,0.05374)(0.44900,0.05697)(0.45000,0.06222)(0.45100,0.06566)(0.45200,0.06990)(0.45300,0.07374)(0.45400,0.07737)(0.45500,0.08323)(0.45600,0.08828)(0.45700,0.09273)(0.45800,0.09879)(0.45900,0.10485)(0.46000,0.11172)(0.46100,0.11616)(0.46200,0.12141)(0.46300,0.12727)(0.46400,0.13394)(0.46500,0.14061)(0.46600,0.14707)(0.46700,0.15475)(0.46800,0.16343)(0.46900,0.17010)(0.47000,0.17960)(0.47100,0.18707)(0.47200,0.19596)(0.47300,0.20525)(0.47400,0.21293)(0.47500,0.22141)(0.47600,0.23111)(0.47700,0.24020)(0.47800,0.25111)(0.47900,0.25859)(0.48000,0.26949)(0.48100,0.28182)(0.48200,0.29071)(0.48300,0.30263)(0.48400,0.31374)(0.48500,0.32525)(0.48600,0.33535)(0.48700,0.34566)(0.48800,0.35737)(0.48900,0.36626)(0.49000,0.37778)(0.49100,0.38646)(0.49200,0.39879)(0.49300,0.40848)(0.49400,0.42061)(0.49500,0.43394)(0.49600,0.44747)(0.49700,0.46121)(0.49800,0.47455)(0.49900,0.48545)(0.50000,0.49657)(0.50100,0.50909)(0.50200,0.52040)(0.50300,0.53313)(0.50400,0.54606)(0.50500,0.55697)(0.50600,0.56828)(0.50700,0.58121)(0.50800,0.59455)(0.50900,0.60626)(0.51000,0.61657)(0.51100,0.62869)(0.51200,0.64040)(0.51300,0.65253)(0.51400,0.66687)(0.51500,0.67919)(0.51600,0.69111)(0.51700,0.70202)(0.51800,0.71253)(0.51900,0.72303)(0.52000,0.73576)(0.52100,0.74566)(0.52200,0.75737)(0.52300,0.76566)(0.52400,0.77374)(0.52500,0.78303)(0.52600,0.79253)(0.52700,0.80121)(0.52800,0.81232)(0.52900,0.82182)(0.53000,0.82747)(0.53100,0.83515)(0.53200,0.84283)(0.53300,0.85010)(0.53400,0.85879)(0.53500,0.86566)(0.53600,0.87232)(0.53700,0.87717)(0.53800,0.88323)(0.53900,0.88828)(0.54000,0.89293)(0.54100,0.89939)(0.54200,0.90505)(0.54300,0.90929)(0.54400,0.91535)(0.54500,0.92000)(0.54600,0.92424)(0.54700,0.93071)(0.54800,0.93475)(0.54900,0.93859)(0.55000,0.94283)(0.55100,0.94687)(0.55200,0.95010)(0.55300,0.95394)(0.55400,0.95758)(0.55500,0.96000)(0.55600,0.96222)(0.55700,0.96485)(0.55800,0.96626)(0.55900,0.96869)(0.56000,0.97071)(0.56100,0.97253)(0.56200,0.97475)(0.56300,0.97616)(0.56400,0.97818)(0.56500,0.98020)(0.56600,0.98162)(0.56700,0.98323)(0.56800,0.98404)(0.56900,0.98505)(0.57000,0.98586)(0.57100,0.98687)(0.57200,0.98848)(0.57300,0.98929)(0.57400,0.98990)(0.57500,0.99071)(0.57600,0.99111)(0.57700,0.99232)(0.57800,0.99293)(0.57900,0.99354)(0.58000,0.99354)(0.58100,0.99394)(0.58200,0.99414)(0.58300,0.99455)(0.58400,0.99495)(0.58500,0.99515)(0.58600,0.99596)(0.58700,0.99616)(0.58800,0.99657)(0.58900,0.99677)(0.59000,0.99697)(0.59100,0.99778)(0.59200,0.99798)(0.59300,0.99798)(0.59400,0.99818)(0.59500,0.99818)(0.59600,0.99838)(0.59700,0.99838)(0.59800,0.99859)(0.59900,0.99859)(0.60000,0.99899)(0.60100,0.99899)(0.60200,0.99899)(0.60300,0.99919)(0.60400,0.99919)(0.60500,0.99919)(0.60600,0.99919)(0.60700,0.99919)(0.60800,0.99919)(0.60900,0.99919)(0.61000,0.99919)(0.61100,0.99939)(0.61200,0.99939)(0.61300,0.99960)(0.61400,0.99980)(0.61500,0.99980)(0.61600,0.99980)(0.61700,0.99980)(0.61800,0.99980)(0.61900,0.99980)(0.62000,1.00000)};
     
\end{axis}
\end{tikzpicture}

\begin{center}
For part A 67299points above angular similarity .85\newline For part B there are no points for my example
\end{center}
 
\end{document}